{"ast":null,"code":"import _defineProperty from \"/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/src/views/User/Transfer/TransferForm.jsx\";\nimport React from \"react\"; // API\n\nimport { getAccountCurrency, doTransfer, getCommissionData } from '../../../util/APIUtils'; // react plugin used to create datetimepicker\n\nimport ReactDatetime from \"react-datetime\"; // reactstrap components\n\nimport { Card, CardHeader, CardBody, InputGroupAddon, InputGroupText, InputGroup, Row, Col, FormGroup, Input, Label, Button } from \"reactstrap\"; // Redux components\n\nimport { connect } from \"react-redux\";\nimport { getCurrentUser } from \"../../../redux/actions\"; // Sweet alert components\n\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\nvar MySwal = withReactContent(Swal);\n/** La page du virement\n * Cette page présente un formulaire qui contient l'ensemble des informations demandées pour effectuer un virement\n * */\n\nvar TransferForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TransferForm, _React$Component);\n\n  // Constructeur\n  function TransferForm(props) {\n    var _this;\n\n    _classCallCheck(this, TransferForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TransferForm).call(this, props));\n\n    _this.loadAccountCurrency = function (event) {\n      var number = event.target.value;\n      var id = event.target.id;\n\n      if (number.length >= 4) {\n        var idCurrency = id === \"principalAccount\" ? \"principalCurrency\" : \"beneficiaryCurrency\";\n        var promise;\n        promise = getAccountCurrency(number);\n\n        if (!promise) {\n          return;\n        }\n\n        _this.setState({\n          isLoadingCurrency: true\n        }); // Initialisation de l'alert\n\n\n        var Toast = MySwal.mixin({\n          toast: true,\n          position: 'center',\n          showConfirmButton: false,\n          timer: 2000\n        });\n        promise.then(function (response) {\n          // récupérer le devise\n          if (response.state === \"active\") {\n            var _this$setState;\n\n            _this.setState((_this$setState = {}, _defineProperty(_this$setState, idCurrency, response.currency), _defineProperty(_this$setState, \"isLoadingCurrency\", false), _this$setState));\n          } else {\n            // afficher un message d’erreur\n            Toast.fire({\n              type: 'error',\n              title: 'Compte en opposition. Vous pouvez pas  effectuer cette opération!'\n            });\n          }\n        }).catch(function (error) {\n          _this.setState({\n            isLoadingCurrency: false\n          });\n        });\n      }\n    };\n\n    _this.loadCommissionData = function (event) {\n      event.preventDefault();\n\n      if (event.target.value === \"\" || event.target.value === 0) {\n        return;\n      }\n\n      var commissionData = {\n        accountN1: _this.state.principalAccount,\n        accountN2: _this.state.beneficiaryAccount,\n        amount: _this.state.totalAmount\n      };\n      var promise;\n      promise = getCommissionData(commissionData);\n\n      if (!promise) {\n        return;\n      }\n\n      _this.setState({\n        isLoadingCurrency: true\n      });\n\n      promise.then(function (response) {\n        // récupérer la commission\n        _this.setState({\n          applyedRate: response.commissionRate,\n          commissionAmount: response.commissionAmount,\n          commissionTVA: response.tvaAmount,\n          isLoadingCurrency: false\n        });\n\n        _this.getTotalAmount(_this.state.applyCommission);\n      }).catch(function (error) {\n        _this.setState({\n          isLoadingCurrency: false\n        });\n      });\n    };\n\n    _this.getTotalAmount = function (applyCommission) {\n      if (applyCommission) {\n        _this.setState({\n          totalAmount: parseFloat(_this.state.transactionAmount) + _this.state.commissionAmount + _this.state.commissionTVA\n        });\n      } else {\n        _this.setState({\n          totalAmount: _this.state.transactionAmount\n        });\n      }\n    };\n\n    _this.state = {\n      focused: \"\",\n      transactionType: \"\",\n      // Type de transaction\n      principalAccount: \"\",\n      // Compte donneur d’ordre\n      principalCurrency: \"NaN\",\n      // Devise Compte donneur ordre\n      beneficiaryAccount: \"\",\n      // Compte bénéficiaire\n      beneficiaryCurrency: \"NaN2\",\n      // Devise Compte bénéficiaire\n      transactionAmount: 0,\n      // Montant de l’opération\n      transactionCurrency: \"NaN\",\n      // Devise de l’opération: doit être égale à la devise du compte à débiter ou celle du compte à créditer\n      transferReason: \"\",\n      // Motif de virement\n      executionDate: new Date(),\n      // Date exécution : par défaut c'est la date courante\n\n      /*DBValueDate: \"\",                // Date valeur DB: Par défaut = J-1 (paramétrable par catégorie de cpt)\n      CRValueDate: \"\",*/\n      // Date valeur CR: Par défaut = J+1 (paramétrable par catégorie de cpt)\n      //commissionCode: 0,              // Code Commission appliquée: Non modifiable\n      applyedRate: 0,\n      // taux appliqué: Non modifiable\n      commissionAmount: 0,\n      // Montant commission: Non modifiable\n      applyCommission: true,\n      // Appliquer commission: OUI/NON\n      commissionTVA: 0,\n      // TVA sur commission: Calculé automatiquement par un taux paramétrable\n      chargeType: \"\",\n      // Type de charge : = ‘OUR’ par défaut La charge est à appliquer sur le compte à débiter\n      totalAmount: 0,\n      // Le montant total à débiter\n\n      /* Saisie uniquement pour les  transferts en devise */\n      transferNature: \"\",\n      // Nature de transfert : Saisie uniquement pour MAD to MAC ou MAD to Autre devise\n      authorizationNumber: \"\",\n      // Numéro d’autorisation: Saisie uniquement pour MAD to MAC ou MAD to Autre devise\n      authorizationValidity: \"\",\n      // Validité de l’autorisation: Saisie uniquement pour MAD to MAC ou MAD to Autre devise\n      exchangeRate: \"\",\n      // Cours de change: Non modifiable\n      tradingTicket: \"\",\n      // La référence du ticket de négociation: Saisie uniquement pour les  clients de la salle de marché ou pour les transactions de très grand montant\n      largeAmount: 4000,\n      // *****************************************\n      account: [],\n      isLoadingCurrency: true\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChangeCheckbox = _this.handleChangeCheckbox.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.loadCommissionData = _this.loadCommissionData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.loadAccountCurrency = _this.loadAccountCurrency.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getTotalAmount = _this.getTotalAmount.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TransferForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getCurrentUser();\n    } // Cette fonction permet d'affecter les infos saisies à la variable convenable\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var target = event.target;\n      var value = target.type === 'checkbox' ? target.checked : target.value;\n      var id = target.id;\n      this.setState(_defineProperty({}, id, value));\n    } // Cette fonction se déclenche lorsque l'utilisateur clique sur le checkbox \"appliquer commission\"\n    // Elle permet d'affecter une valeur à la variable \"applyCommission\" avec la mise à jour du montant total\n    // - true : pour appliquer la commission\n    // - false: sinon\n\n  }, {\n    key: \"handleChangeCheckbox\",\n    value: function handleChangeCheckbox(event) {\n      var target = event.target;\n      var value = target.checked;\n      var id = target.id;\n      this.setState(_defineProperty({}, id, value)); // Appler a la fonction getTotalAmount pour la mise à jour du montant total\n\n      this.getTotalAmount(target.checked);\n    } // Cette fonction se déclenche lorsque l'utilisateur clique sur \"virer\"\n    // Elle permet d'envoyer les données de l'opération au serveur\n\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this2 = this;\n\n      event.preventDefault(); // Récupérer les données du virement\n\n      var transferData = {\n        // affecter la valeur de type de transaction selon le role d'utilisateur\n        transactionType: this.props.currentUser.role === \"ROLE_AGENT\" ? \"agent\" : this.props.currentUser.role === \"ROLE_CTN\" ? \"ctn\" : this.props.currentUser.role === \"ROLE_CTRL\" ? \"ctrl\" : \"\",\n        principalAccount: this.state.principalAccount,\n        principalCurrency: this.state.principalCurrency,\n        beneficiaryAccount: this.state.beneficiaryAccount,\n        beneficiaryCurrency: this.state.beneficiaryCurrency,\n        transactionAmount: this.state.transactionAmount,\n        transactionCurrency: this.state.transactionCurrency,\n        transferReason: this.state.transferReason,\n        executionDate: this.state.executionDate,\n        transferNature: this.state.transferNature,\n        authorizationNumber: this.state.authorizationNumber,\n        authorizationValidity: this.state.authorizationValidity,\n        //commissionCode: this.state.commissionCode,\n        applyedRate: this.state.applyedRate,\n        commissionAmount: this.state.commissionAmount,\n        applyCommission: this.state.applyCommission,\n        commissionTVA: this.state.commissionTVA,\n        chargeType: this.state.chargeType,\n        exchangeRate: this.state.exchangeRate,\n        tradingTicket: this.state.tradingTicket,\n        totalAmount: this.state.totalAmount\n      }; // Envoyer les données de l'opération au serveur\n\n      doTransfer(transferData).then(function (response) {\n        // affichee un message de succès\n\n        /*return */\n        MySwal.fire({\n          type: 'success',\n          title: 'Virement effectué avec succès',\n          showConfirmButton: false,\n          timer: 1500\n        }); // redirection vers un tableau de transactions.\n\n        _this2.props.history.push(\"/user/lsttransfers\");\n      }).catch(function (error) {\n        if (error.status === 401) {\n          // affichee un message d’erreur\n          MySwal.fire({\n            type: 'error',\n            title: 'Vous avez été déconnecté. Veuillez vous connecter pour éffectuer cette opération.',\n            showConfirmButton: false,\n            timer: 1500\n          }); // redirection vers la page d'authentification.\n\n          _this2.props.history.push('/login');\n        } else {\n          // affichee un message d’erreur\n          MySwal.fire({\n            type: 'warning',\n            title: error.message || 'Pardon! Quelque chose s\\'est mal passé. Veuillez réessayer!',\n            showConfirmButton: false,\n            timer: 1500\n          });\n        }\n      });\n    } // Cette fonction se déclenche lorsque l'utilisateur saisit le numero d'un compte\n    // Elle permet de récupérer le devise du compte sinon elle retourne un message d'erreur\n\n  }, {\n    key: \"getTransactionCurrency\",\n    // Cette fonction permet d'affecter la devise du compte à débiter à la variable \"transactionCurrency\" lorsque\n    // la devise du compte à débiter est la meme que du compte à créditer\n    value: function getTransactionCurrency() {\n      if (this.state.principalCurrency === this.state.beneficiaryCurrency) {\n        this.setState({\n          transactionCurrency: this.state.principalCurrency\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, \"Saisie du virement\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }), React.createElement(Col, {\n        md: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"principalAccount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, \"N\\xB0 compte d\\xE9biteur\"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"number\",\n        id: \"principalAccount\",\n        placeholder: \"D\\xE9biteur\",\n        value: this.state.principalAccount,\n        onChange: function onChange(event) {\n          _this3.handleChange(event);\n\n          _this3.loadAccountCurrency(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }), React.createElement(InputGroupAddon, {\n        addonType: \"append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, this.state.principalCurrency))))), React.createElement(FormGroup, {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"beneficiaryAccount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, \"N\\xB0 compte b\\xE9n\\xE9ficiaire\"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"number\",\n        id: \"beneficiaryAccount\",\n        placeholder: \"B\\xE9n\\xE9ficiaire\",\n        value: this.state.beneficiaryAccount,\n        onChange: function onChange(event) {\n          _this3.handleChange(event);\n\n          _this3.loadAccountCurrency(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }), React.createElement(InputGroupAddon, {\n        addonType: \"append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, this.state.beneficiaryCurrency)))))), React.createElement(\"div\", {\n        className: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"transactionAmount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, \"Montant\"), React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"number\",\n        id: \"transactionAmount\",\n        placeholder: \"Montant ...\",\n        value: this.state.transactionAmount,\n        onChange: function onChange(event) {\n          _this3.handleChange(event);\n\n          _this3.getTransactionCurrency();\n\n          _this3.loadCommissionData(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }), React.createElement(InputGroupAddon, {\n        addonType: \"append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, React.createElement(InputGroupText, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, this.state.principalCurrency === this.state.beneficiaryCurrency ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, this.state.transactionCurrency) : React.createElement(\"select\", {\n        name: \"select\",\n        className: \"form-control1\",\n        id: \"transactionCurrency\",\n        value: this.state.transactionCurrency,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, this.state.principalCurrency), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, this.state.beneficiaryCurrency)))))), React.createElement(FormGroup, {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"transferReason\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, \"Motif\"), React.createElement(Input, {\n        type: \"text\",\n        placeholder: \"Motif ...\",\n        id: \"transferReason\",\n        value: this.state.transferReason,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"executionDate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, \"Date d'execution\"), React.createElement(ReactDatetime, {\n        id: \"executionDate\",\n        inputProps: {\n          className: \"form-control\",\n          placeholder: \"Date Picker Here\"\n        },\n        value: this.state.executionDate,\n        defaultValue: new Date(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }))),\n      /********************* Echange **************/\n      this.state.principalCurrency === \"MAD\" && this.state.beneficiaryCurrency !== \"MAD\" ? React.createElement(React.Fragment, null, this.state.transactionAmount > this.state.largeAmount ? React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"tradingTicket\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426\n        },\n        __self: this\n      }, \"Ticket de n\\xE9gociation\"), React.createElement(Input, {\n        type: \"number\",\n        id: \"tradingTicket\",\n        placeholder: \"ticket ...\",\n        className: \"tim-icons\",\n        value: this.state.tradingTicket,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      })) : null, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"transferNature\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440\n        },\n        __self: this\n      }, \"Nature de transfert\"), React.createElement(Input, {\n        type: \"select\",\n        name: \"select\",\n        id: \"transferNature\",\n        value: this.state.transferNature,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449\n        },\n        __self: this\n      }, \"2\"))), React.createElement(\"div\", {\n        className: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"authorizationNumber\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455\n        },\n        __self: this\n      }, \"N\\xB0 d'autorisation\"), React.createElement(Input, {\n        type: \"number\",\n        id: \"authorizationNumber\",\n        placeholder: \"Code ...\",\n        value: this.state.authorizationNumber,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"authorizationValidity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }, \"Validit\\xE9 de l'autorisation\"), React.createElement(Input, {\n        type: \"number\",\n        id: \"authorizationValidity\",\n        placeholder: \"???\",\n        value: this.state.authorizationValidity,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"exchangeRate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477\n        },\n        __self: this\n      }, \"Cours de change\"), React.createElement(Input, {\n        type: \"number\",\n        id: \"exchangeRate\",\n        placeholder: \"...\",\n        value: this.state.exchangeRate,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478\n        },\n        __self: this\n      })))) : null\n      /********************* Commission **************/\n      , React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"chargeType\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490\n        },\n        __self: this\n      }, \"Type de charge\"), React.createElement(Input, {\n        type: \"select\",\n        id: \"chargeType\",\n        name: \"select\",\n        value: this.state.chargeType,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498\n        },\n        __self: this\n      }, \"OUR\"), React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499\n        },\n        __self: this\n      }, \"2\"))), React.createElement(\"div\", {\n        className: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"commissionCode\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505\n        },\n        __self: this\n      }, \"Taux applique\"), React.createElement(\"h3\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 507\n        },\n        __self: this\n      }, this.state.applyedRate + \" \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"commissionAmount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 513\n        },\n        __self: this\n      }, \"Montant commission\"), React.createElement(\"h3\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514\n        },\n        __self: this\n      }, this.state.commissionAmount + \" \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"commissionTVA\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520\n        },\n        __self: this\n      }, \"TVA sur commission\"), React.createElement(\"h3\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521\n        },\n        __self: this\n      }, this.state.commissionTVA + \" \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"totalAmount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528\n        },\n        __self: this\n      }, \"Montant total\"), React.createElement(\"h3\", {\n        className: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }, this.state.totalAmount + \" \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530\n        },\n        __self: this\n      }, this.state.transactionCurrency))), React.createElement(FormGroup, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533\n        },\n        __self: this\n      }, React.createElement(Label, {\n        className: \"form-check-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534\n        },\n        __self: this\n      }, React.createElement(Input, {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        id: \"applyCommission\",\n        onChange: this.handleChangeCheckbox,\n        checked: this.state.applyCommission,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535\n        },\n        __self: this\n      }), \"Appliquer commission\", React.createElement(\"span\", {\n        className: \"form-check-sign\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"check\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544\n        },\n        __self: this\n      })))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549\n        },\n        __self: this\n      }), React.createElement(Button, {\n        type: \"reset\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550\n        },\n        __self: this\n      }, \"Annuler\"), React.createElement(Button, {\n        type: \"submit\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551\n        },\n        __self: this\n      }, \"Virer\"))), React.createElement(Col, {\n        md: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      }))))))));\n    }\n  }]);\n\n  return TransferForm;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getCurrentUser: getCurrentUser\n})(TransferForm);","map":{"version":3,"sources":["/Users/geekh04/workspace/BCP/bcp-transactionMDP-client/src/views/User/Transfer/TransferForm.jsx"],"names":["React","getAccountCurrency","doTransfer","getCommissionData","ReactDatetime","Card","CardHeader","CardBody","InputGroupAddon","InputGroupText","InputGroup","Row","Col","FormGroup","Input","Label","Button","connect","getCurrentUser","Swal","withReactContent","MySwal","TransferForm","props","loadAccountCurrency","event","number","target","value","id","length","idCurrency","promise","setState","isLoadingCurrency","Toast","mixin","toast","position","showConfirmButton","timer","then","response","state","currency","fire","type","title","catch","error","loadCommissionData","preventDefault","commissionData","accountN1","principalAccount","accountN2","beneficiaryAccount","amount","totalAmount","applyedRate","commissionRate","commissionAmount","commissionTVA","tvaAmount","getTotalAmount","applyCommission","parseFloat","transactionAmount","focused","transactionType","principalCurrency","beneficiaryCurrency","transactionCurrency","transferReason","executionDate","Date","chargeType","transferNature","authorizationNumber","authorizationValidity","exchangeRate","tradingTicket","largeAmount","account","handleChange","bind","handleSubmit","handleChangeCheckbox","checked","transferData","currentUser","role","history","push","status","message","getTransactionCurrency","className","placeholder","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\n\n// API\nimport {\n    getAccountCurrency, doTransfer, getCommissionData\n} from '../../../util/APIUtils';\n// react plugin used to create datetimepicker\nimport ReactDatetime from \"react-datetime\";\n\n// reactstrap components\nimport {\n    Card,\n    CardHeader,\n    CardBody,\n    InputGroupAddon,\n    InputGroupText,\n    InputGroup,\n    Row,\n    Col,\n    FormGroup,\n    Input,\n    Label,\n    Button\n} from \"reactstrap\";\n\n// Redux components\nimport { connect } from \"react-redux\";\nimport { getCurrentUser } from \"../../../redux/actions\";\n\n// Sweet alert components\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\n\nconst MySwal = withReactContent(Swal);\n\n/** La page du virement\n * Cette page présente un formulaire qui contient l'ensemble des informations demandées pour effectuer un virement\n * */\n\nclass TransferForm extends React.Component {\n    // Constructeur\n    constructor(props) {\n        super(props);\n        this.state = {\n            focused: \"\",\n            transactionType: \"\",              // Type de transaction\n            principalAccount: \"\",             // Compte donneur d’ordre\n            principalCurrency: \"NaN\",         // Devise Compte donneur ordre\n            beneficiaryAccount: \"\",           // Compte bénéficiaire\n            beneficiaryCurrency: \"NaN2\",      // Devise Compte bénéficiaire\n            transactionAmount: 0,             // Montant de l’opération\n            transactionCurrency: \"NaN\",       // Devise de l’opération: doit être égale à la devise du compte à débiter ou celle du compte à créditer\n            transferReason: \"\",               // Motif de virement\n            executionDate: new Date(),        // Date exécution : par défaut c'est la date courante\n            /*DBValueDate: \"\",                // Date valeur DB: Par défaut = J-1 (paramétrable par catégorie de cpt)\n            CRValueDate: \"\",*/                // Date valeur CR: Par défaut = J+1 (paramétrable par catégorie de cpt)\n            //commissionCode: 0,              // Code Commission appliquée: Non modifiable\n            applyedRate: 0,                    // taux appliqué: Non modifiable\n            commissionAmount: 0,              // Montant commission: Non modifiable\n            applyCommission: true,            // Appliquer commission: OUI/NON\n            commissionTVA: 0,                 // TVA sur commission: Calculé automatiquement par un taux paramétrable\n            chargeType: \"\",                   // Type de charge : = ‘OUR’ par défaut La charge est à appliquer sur le compte à débiter\n            totalAmount: 0,                   // Le montant total à débiter\n            /* Saisie uniquement pour les  transferts en devise */\n            transferNature: \"\",               // Nature de transfert : Saisie uniquement pour MAD to MAC ou MAD to Autre devise\n            authorizationNumber: \"\",          // Numéro d’autorisation: Saisie uniquement pour MAD to MAC ou MAD to Autre devise\n            authorizationValidity: \"\",        // Validité de l’autorisation: Saisie uniquement pour MAD to MAC ou MAD to Autre devise\n            exchangeRate: \"\",                 // Cours de change: Non modifiable\n            tradingTicket: \"\",                // La référence du ticket de négociation: Saisie uniquement pour les  clients de la salle de marché ou pour les transactions de très grand montant\n            largeAmount: 4000,                // *****************************************\n\n            account: [],\n            isLoadingCurrency: true\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChangeCheckbox = this.handleChangeCheckbox.bind(this);\n        this.loadCommissionData = this.loadCommissionData.bind(this);\n        this.loadAccountCurrency = this.loadAccountCurrency.bind(this);\n        this.getTotalAmount = this.getTotalAmount.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.getCurrentUser();\n    }\n\n    // Cette fonction permet d'affecter les infos saisies à la variable convenable\n    handleChange(event) {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const id = target.id;\n\n        this.setState({\n            [id]: value\n        });\n    }\n\n    // Cette fonction se déclenche lorsque l'utilisateur clique sur le checkbox \"appliquer commission\"\n    // Elle permet d'affecter une valeur à la variable \"applyCommission\" avec la mise à jour du montant total\n    // - true : pour appliquer la commission\n    // - false: sinon\n    handleChangeCheckbox(event) {\n        const target = event.target;\n        const value = target.checked;\n        const id = target.id;\n\n        this.setState({\n            [id]: value\n        });\n\n        // Appler a la fonction getTotalAmount pour la mise à jour du montant total\n        this.getTotalAmount(target.checked);\n    }\n\n    // Cette fonction se déclenche lorsque l'utilisateur clique sur \"virer\"\n    // Elle permet d'envoyer les données de l'opération au serveur\n    handleSubmit(event) {\n        event.preventDefault();\n\n        // Récupérer les données du virement\n        const transferData = {\n            // affecter la valeur de type de transaction selon le role d'utilisateur\n            transactionType: this.props.currentUser.role===\"ROLE_AGENT\" ? \"agent\"\n                             : this.props.currentUser.role===\"ROLE_CTN\" ? \"ctn\"\n                             : this.props.currentUser.role===\"ROLE_CTRL\"? \"ctrl\":\"\",\n            principalAccount: this.state.principalAccount,\n            principalCurrency: this.state.principalCurrency,\n            beneficiaryAccount: this.state.beneficiaryAccount,\n            beneficiaryCurrency: this.state.beneficiaryCurrency,\n            transactionAmount: this.state.transactionAmount,\n            transactionCurrency: this.state.transactionCurrency,\n            transferReason: this.state.transferReason,\n            executionDate: this.state.executionDate,\n            transferNature: this.state.transferNature,\n            authorizationNumber: this.state.authorizationNumber,\n            authorizationValidity: this.state.authorizationValidity,\n            //commissionCode: this.state.commissionCode,\n            applyedRate: this.state.applyedRate,\n            commissionAmount: this.state.commissionAmount,\n            applyCommission: this.state.applyCommission,\n            commissionTVA: this.state.commissionTVA,\n            chargeType: this.state.chargeType,\n            exchangeRate: this.state.exchangeRate,\n            tradingTicket: this.state.tradingTicket,\n            totalAmount: this.state.totalAmount\n        };\n\n        // Envoyer les données de l'opération au serveur\n        doTransfer(transferData)\n            .then(response => {\n                // affichee un message de succès\n                /*return */\n                MySwal.fire({\n                    type: 'success',\n                    title: 'Virement effectué avec succès',\n                    showConfirmButton: false,\n                    timer: 1500\n                });\n                // redirection vers un tableau de transactions.\n                this.props.history.push(\"/user/lsttransfers\");\n            }).catch(error => {\n            if (error.status === 401) {\n                // affichee un message d’erreur\n                MySwal.fire({\n                    type: 'error',\n                    title: 'Vous avez été déconnecté. Veuillez vous connecter pour éffectuer cette opération.',\n                    showConfirmButton: false,\n                    timer: 1500\n                });\n                // redirection vers la page d'authentification.\n                this.props.history.push('/login');\n            } else {\n                // affichee un message d’erreur\n                MySwal.fire({\n                    type: 'warning',\n                    title: error.message || 'Pardon! Quelque chose s\\'est mal passé. Veuillez réessayer!',\n                    showConfirmButton: false,\n                    timer: 1500\n                })\n            }\n        });\n    }\n\n    // Cette fonction se déclenche lorsque l'utilisateur saisit le numero d'un compte\n    // Elle permet de récupérer le devise du compte sinon elle retourne un message d'erreur\n    loadAccountCurrency = (event) => {\n        const number = event.target.value;\n        const id = event.target.id;\n\n        if (number.length >= 4) {\n            let idCurrency = (id === \"principalAccount\") ? (\"principalCurrency\") : (\"beneficiaryCurrency\");\n            let promise;\n\n            promise = getAccountCurrency(number);\n\n            if (!promise) {\n                return;\n            }\n\n            this.setState({\n                isLoadingCurrency: true\n            });\n\n            // Initialisation de l'alert\n            const Toast = MySwal.mixin({\n                toast: true,\n                position: 'center',\n                showConfirmButton: false,\n                timer: 2000\n            });\n            promise\n                .then(response => {\n                    // récupérer le devise\n                    if (response.state === \"active\") {\n                        this.setState({\n                            [idCurrency]: response.currency,\n                            isLoadingCurrency: false\n                        })\n                    } else {\n                        // afficher un message d’erreur\n                        Toast.fire({\n                            type: 'error',\n                            title: 'Compte en opposition. Vous pouvez pas  effectuer cette opération!'\n                        });\n                    }\n                }).catch(error => {\n                this.setState({\n                    isLoadingCurrency: false\n                })\n            });\n        }\n    };\n\n    // Cette fonction se déclenche lorsque l'utilisateur saisit le montant du virement\n    // Elle permet de récupérer la commission du virement.\n    loadCommissionData = (event) => {\n        event.preventDefault();\n\n        if (event.target.value===\"\" || event.target.value===0) {\n            return;\n        }\n\n        let commissionData = {\n            accountN1: this.state.principalAccount,\n            accountN2: this.state.beneficiaryAccount,\n            amount: this.state.totalAmount\n        };\n\n        let promise;\n\n        promise = getCommissionData(commissionData);\n\n        if (!promise) {\n            return;\n        }\n\n        this.setState({\n            isLoadingCurrency: true\n        });\n\n        promise\n            .then(response => {\n                // récupérer la commission\n                this.setState({\n                    applyedRate: response.commissionRate,\n                    commissionAmount: response.commissionAmount,\n                    commissionTVA: response.tvaAmount,\n                    isLoadingCurrency: false\n                });\n                this.getTotalAmount(this.state.applyCommission);\n            }).catch(error => {\n            this.setState({\n                isLoadingCurrency: false\n            })\n        });\n    };\n\n    // Cette fonction permet de calculer et d'affecter le montant total selon la valeur de \"applyCommission\n    // - Si applyCommission = true : Montant Total = montant du virement + montant de la commission + TVA sur commission\n    // - Sinon : Montant Total = montant du virement\n    getTotalAmount = (applyCommission) => {\n        if (applyCommission) {\n            this.setState({\n                totalAmount: parseFloat(this.state.transactionAmount)+this.state.commissionAmount + this.state.commissionTVA\n            });\n        } else {\n            this.setState({\n                totalAmount: this.state.transactionAmount\n            });\n        }\n    };\n\n    // Cette fonction permet d'affecter la devise du compte à débiter à la variable \"transactionCurrency\" lorsque\n    // la devise du compte à débiter est la meme que du compte à créditer\n    getTransactionCurrency() {\n        if (this.state.principalCurrency === this.state.beneficiaryCurrency) {\n            this.setState({\n                transactionCurrency: this.state.principalCurrency\n            })\n        }\n    }\n\n    render() {\n        return (\n            <>\n                <div className=\"content\">\n                    <Row>\n                        <Col md=\"12\">\n                            <Card>\n                                <CardHeader>\n                                    <h4 className=\"title\">Saisie du virement</h4>\n                                </CardHeader>\n                                <CardBody>\n                                    <Row>\n                                        <Col md=\"2\"></Col>\n                                        <Col md=\"8\">\n                                            {/* Virement INTRA en agence*/}\n                                            <form onSubmit={this.handleSubmit}>\n                                                <div className=\"form-row\">\n                                                    <FormGroup className=\"col-md-6\">\n                                                        <Label for=\"principalAccount\">N° compte débiteur</Label>\n                                                        <InputGroup>\n                                                            <Input\n                                                                type=\"number\"\n                                                                id=\"principalAccount\"\n                                                                placeholder=\"Débiteur\"\n                                                                value={this.state.principalAccount}\n                                                                onChange={(event) => {\n                                                                    this.handleChange(event);\n                                                                    this.loadAccountCurrency(event)\n                                                                }}\n                                                            />\n                                                            <InputGroupAddon addonType=\"append\">\n                                                                <InputGroupText>\n                                                                    <p>{this.state.principalCurrency}</p>\n                                                                </InputGroupText>\n                                                            </InputGroupAddon>\n                                                        </InputGroup>\n                                                    </FormGroup>\n                                                    <FormGroup className=\"col-md-6\">\n                                                        <Label for=\"beneficiaryAccount\">N° compte bénéficiaire</Label>\n                                                        <InputGroup>\n                                                            <Input\n                                                                type=\"number\"\n                                                                id=\"beneficiaryAccount\"\n                                                                placeholder=\"Bénéficiaire\"\n                                                                value={this.state.beneficiaryAccount}\n                                                                onChange={(event) => {\n                                                                    this.handleChange(event);\n                                                                    this.loadAccountCurrency(event)\n                                                                }}\n                                                            />\n                                                            <InputGroupAddon addonType=\"append\">\n                                                                <InputGroupText>\n                                                                    <p>{this.state.beneficiaryCurrency}</p>\n                                                                </InputGroupText>\n                                                            </InputGroupAddon>\n                                                        </InputGroup>\n                                                    </FormGroup>\n                                                </div>\n\n                                                <div className=\"form-row\">\n                                                    <FormGroup className=\"col-md-4\">\n                                                        <Label for=\"transactionAmount\">Montant</Label>\n                                                        <InputGroup>\n                                                            <Input\n                                                                type=\"number\"\n                                                                id=\"transactionAmount\"\n                                                                placeholder=\"Montant ...\"\n                                                                value={this.state.transactionAmount}\n                                                                onChange={(event) => {\n                                                                    this.handleChange(event);\n                                                                    this.getTransactionCurrency();\n                                                                    this.loadCommissionData(event);\n                                                                }}\n                                                            />\n                                                            <InputGroupAddon addonType=\"append\">\n                                                                <InputGroupText>\n                                                                    {this.state.principalCurrency === this.state.beneficiaryCurrency ?\n                                                                        (<p>{this.state.transactionCurrency}</p>) :\n                                                                        (<select\n                                                                            name=\"select\"\n                                                                            className=\"form-control1\"\n                                                                            id=\"transactionCurrency\"\n                                                                            value={this.state.transactionCurrency}\n                                                                            onChange={this.handleChange}\n                                                                        >\n                                                                            <option>{this.state.principalCurrency}</option>\n                                                                            <option>{this.state.beneficiaryCurrency}</option>\n                                                                        </select>)\n                                                                    }\n                                                                </InputGroupText>\n                                                            </InputGroupAddon>\n                                                        </InputGroup>\n                                                    </FormGroup>\n                                                    <FormGroup className=\"col-md-4\">\n                                                        <Label for=\"transferReason\">Motif</Label>\n                                                        <Input\n                                                            type=\"text\"\n                                                            placeholder=\"Motif ...\"\n                                                            id=\"transferReason\"\n                                                            value={this.state.transferReason}\n                                                            onChange={this.handleChange}\n                                                        />\n                                                    </FormGroup>\n                                                    <FormGroup className=\"col-md-4\">\n                                                        <Label for=\"executionDate\">Date d'execution</Label>\n                                                        <ReactDatetime\n                                                            id=\"executionDate\"\n                                                            inputProps={{\n                                                                className: \"form-control\",\n                                                                placeholder: \"Date Picker Here\"\n                                                            }}\n                                                            value={this.state.executionDate}\n                                                            defaultValue={new Date()}\n                                                        />\n                                                    </FormGroup>\n                                                </div>\n                                                {/********************* Echange **************/\n                                                    (this.state.principalCurrency === \"MAD\" && this.state.beneficiaryCurrency !== \"MAD\") ? (\n                                                        <>\n                                                            {\n                                                                (this.state.transactionAmount > this.state.largeAmount) ? (\n                                                                    <FormGroup>\n                                                                        <Label for=\"tradingTicket\">Ticket de\n                                                                            négociation</Label>\n                                                                        <Input\n                                                                            type=\"number\"\n                                                                            id=\"tradingTicket\"\n                                                                            placeholder=\"ticket ...\"\n                                                                            className=\"tim-icons\"\n                                                                            value={this.state.tradingTicket}\n                                                                            onChange={this.handleChange}\n                                                                        />\n                                                                    </FormGroup>\n                                                                ) : null\n                                                            }\n                                                            <FormGroup>\n                                                                <Label for=\"transferNature\">Nature de transfert</Label>\n                                                                <Input\n                                                                    type=\"select\"\n                                                                    name=\"select\"\n                                                                    id=\"transferNature\"\n                                                                    value={this.state.transferNature}\n                                                                    onChange={this.handleChange}\n                                                                >\n                                                                    <option>1</option>\n                                                                    <option>2</option>\n                                                                </Input>\n                                                            </FormGroup>\n\n                                                            <div className=\"form-row\">\n                                                                <FormGroup className=\"col-md-3\">\n                                                                    <Label for=\"authorizationNumber\">N°\n                                                                        d'autorisation</Label>\n                                                                    <Input\n                                                                        type=\"number\"\n                                                                        id=\"authorizationNumber\"\n                                                                        placeholder=\"Code ...\"\n                                                                        value={this.state.authorizationNumber}\n                                                                        onChange={this.handleChange}\n                                                                    />\n                                                                </FormGroup>\n                                                                <FormGroup className=\"col-md-6\">\n                                                                    <Label for=\"authorizationValidity\">Validité de\n                                                                        l'autorisation</Label>\n                                                                    <Input\n                                                                        type=\"number\"\n                                                                        id=\"authorizationValidity\"\n                                                                        placeholder=\"???\"\n                                                                        value={this.state.authorizationValidity}\n                                                                        onChange={this.handleChange}\n                                                                    />\n                                                                </FormGroup>\n                                                                <FormGroup className=\"col-md-3\">\n                                                                    <Label for=\"exchangeRate\">Cours de change</Label>\n                                                                    <Input\n                                                                        type=\"number\"\n                                                                        id=\"exchangeRate\"\n                                                                        placeholder=\"...\"\n                                                                        value={this.state.exchangeRate}\n                                                                        disabled\n                                                                    />\n                                                                </FormGroup>\n                                                            </div>\n                                                        </>) : null\n                                                    /********************* Commission **************/}\n                                                <FormGroup>\n                                                    <Label for=\"chargeType\">Type de charge</Label>\n                                                    <Input\n                                                        type=\"select\"\n                                                        id=\"chargeType\"\n                                                        name=\"select\"\n                                                        value={this.state.chargeType}\n                                                        onChange={this.handleChange}\n                                                    >\n                                                        <option>OUR</option>\n                                                        <option>2</option>\n                                                    </Input>\n                                                </FormGroup>\n\n                                                <div className=\"form-row\">\n                                                    <FormGroup className=\"col-md-4\">\n                                                        <Label for=\"commissionCode\">{/*Code Commission/*/}Taux\n                                                            applique</Label>\n                                                        <h3 className=\"card-title\">\n                                                            {this.state.applyedRate + \" \"}<span></span>\n                                                        </h3>\n                                                    </FormGroup>\n\n                                                    <FormGroup className=\"col-md-4\">\n                                                        <Label for=\"commissionAmount\">Montant commission</Label>\n                                                        <h3 className=\"card-title\">\n                                                            {this.state.commissionAmount + \" \"}<span></span>\n                                                        </h3>\n                                                    </FormGroup>\n\n                                                    <FormGroup className=\"col-md-4\">\n                                                        <Label for=\"commissionTVA\">TVA sur commission</Label>\n                                                        <h3 className=\"card-title\">\n                                                            {this.state.commissionTVA + \" \"}<span></span>\n                                                        </h3>\n                                                    </FormGroup>\n                                                </div>\n\n                                                <FormGroup check>\n                                                    <Label for=\"totalAmount\">Montant total</Label>\n                                                    <h3 className=\"card-title\">\n                                                        {this.state.totalAmount + \" \"}<span>{this.state.transactionCurrency}</span>\n                                                    </h3>\n                                                </FormGroup>\n                                                <FormGroup check>\n                                                    <Label className=\"form-check-label\">\n                                                        <Input\n                                                            className=\"form-check-input\"\n                                                            type=\"checkbox\"\n                                                            id=\"applyCommission\"\n                                                            onChange={this.handleChangeCheckbox}\n                                                            checked={this.state.applyCommission}\n                                                        />\n                                                        Appliquer commission\n                                                        <span className=\"form-check-sign\">\n                                                          <span className=\"check\"/>\n                                                        </span>\n                                                    </Label>\n                                                </FormGroup>\n\n                                                <br/>\n                                                <Button type=\"reset\" color=\"primary\">Annuler</Button>\n                                                <Button type=\"submit\" color=\"primary\">Virer</Button>\n                                            </form>\n                                        </Col>\n                                        <Col md=\"2\"></Col>\n                                    </Row>\n                                </CardBody>\n                            </Card>\n                        </Col>\n                    </Row>\n                </div>\n            </>\n        );\n    }\n}\n\nconst mapStateToProps = (state) =>{\n    return {\n        currentUser: state.currentUser\n    };\n};\n\nexport default connect(mapStateToProps, { getCurrentUser })(TransferForm);\n"]},"metadata":{},"sourceType":"module"}